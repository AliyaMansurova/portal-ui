<div class="container entity">
  <h1>
    <i class="fa fa-file-o"></i>
    {{ ::fc.file.file_id }}
  </h1>

  <div class="col-lg-12">
    <section class="row" id="summary">
      <div class="col-lg-7 col-md-7">
        <div class="panel panel-default">
          <div class="panel-heading clearfix">
            <h3 class="panel-title pull-left" data-translate>File Properties</h3>

            <div class="btn-group pull-right">
              <button type="button" class="btn btn-primary" data-ng-click="fc.handleCartButton()">
                <i class="fa fa-shopping-cart"></i>
                <span data-ng-if="fc.isInCart(fc.file.file_id)" data-translate>Remove from Cart</span>
                <span data-ng-if="!fc.isInCart(fc.file.file_id)" data-translate>Add to Cart</span>
              </button>
              <a type="button" class="btn btn-primary" data-ng-href="{{ [fc.file.file_id ] | makeDownloadLink }}">
                <i class="fa fa-cloud-download"></i> Download
              </a>
            </div>

          </div>

        <table id="properties-table"
               class="table table-striped table-hover table-condensed table-bordered table-vertical">
          <tbody>
          <tr>
            <th scope="row" data-translate>File Name</th>
            <td>{{ ::fc.file.file_name }}</td>
          </tr>
          <tr>
            <th scope="row" data-translate>File Access</th>
            <td>
              <i data-ng-if="fc.file.access !== 'open'" class="fa fa-lock"></i>
              <i data-ng-if="fc.file.access === 'open'" class="fa fa-unlock-alt"></i>
              <span data-ng-if="fc.file.access === 'open'" data-translate>Open</span>
              <span data-ng-if="fc.file.access !== 'open'" data-translate>Protected</span>
            </td>
          </tr>
          <tr>
            <th scope="row" data-translate>UUID</th>
            <td>{{ ::fc.file.file_id }}</td>
          </tr>
          <tr>
            <th scope="row" data-translate>File Origin</th>
            <td>{{ ::fc.file.file_origin | humanify }}</td>
          </tr>
          <tr>
            <th scope="row" data-translate>Data format</th>
            <td>{{ ::fc.file.data_format }}</td>
          </tr>
          <tr>
            <th scope="row" data-translate>File Size</th>
            <td>{{ ::fc.file.file_size | size }}</td>
          </tr>
          <tr>
            <th scope="row" data-translate>Checksum</th>
            <td>{{ ::fc.file.md5sum }}</td>
          </tr>
          <tr>
            <th scope="row" data-translate>Published</th>
            <td>{{ ::fc.file.creation_datetime | date }}</td>
          </tr>
          <tr>
            <th scope="row" data-translate>Uploaded</th>
            <td>{{ ::fc.file.uploaded | date }}</td>
          </tr>
          <tr>
            <th scope="row" data-translate>State</th>
            <td>{{ ::fc.file.state | humanify }}</td>
          </tr>
          <tr>
            <th scope="row" data-translate>Archive</th>
            <td>
              {{ ::fc.file.archive.archive_id || '--' }}
                <span data-ng-if="fc.file.archive">
                  (<a data-ui-sref="search.files({ 'filters': {{
                    [{ name: 'files.archive.archive_id', value: fc.file.archive.archive_id }] | makeFilter }}
                    })">
                  {{ fc.archiveCount }} files
                </a>)
                </span>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
  </div>

  <div class="col-lg-5 col-md-5">
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title" data-translate>Data Information</h3>
      </div>
      <table id="data-information-table" class="table table-striped table-hover table-condensed table-bordered">
        <tbody>
        <tr>
          <th scope="row" data-translate>Data Type</th>
          <td>{{ ::fc.file.data_type }}</td>
        </tr>
        <tr>
          <th scope="row" data-translate>Data Subtype</th>
          <td>{{ ::fc.file.data_subtype }}</td>
        </tr>
        <tr>
          <th scope="row" data-translate>Experimental Strategy</th>
          <td>{{ ::fc.file.experimental_strategy || '--' }}</td>
        </tr>
        <tr>
          <th scope="row" data-translate>Platform</th>
          <td>{{ ::fc.file.platform }}</td>
        </tr>
        <tr>
          <th scope="row" data-translate>Data Revision</th>
          <td>tbd {{ ::fc.file.revision }}</td>
        </tr>
        <tr>
          <th scope="row" data-translate>Data Version</th>
          <td>tbd {{ ::fc.file.version }}</td>
        </tr>
        <tr>
          <th scope="row" data-translate>Data Level</th>
          <td>tbd {{ ::fc.file.data_level }}</td>
        </tr>
        <tr>
          <th scope="row" data-translate>Data Submitter</th>
          <td>{{ ::fc.file.center.short_name }}</td>
        </tr>
        <tr>
          <th scope="row" data-translate>Tag</th>
          <td>
            <span data-ng-if="!fc.file.tags">--</span>
              <span data-ng-repeat="tag in fc.file.tags track by $index">
                {{ tag }}
                <span data-ng-if="!$last">, </span>
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  </section>

  <section class="row" id="participants">
    <div class="col-lg-12 col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Associated Participants / Biospecimen</h3>
        </div>
        <div class="panel-body" data-ng-if="!fc.file.participants.length">
          <h4 class="list-group-item-heading">No participants found.</h4>
        </div>
        <div class="table-responsive" data-ng-if="fc.file.participants.length">
          <table id="participants-table" class="table table-striped table-hover table-condensed table-bordered">
            <thead>
            <tr>
              <th scope="col" data-translate>Entity ID</th>
              <th scope="col" data-translate>Entity Type</th>
              <th scope="col" data-translate>Participant UUID</th>
              <th scope="col" data-translate>Annotations</th>
            </tr>
            </thead>
            <tbody>
            <tr data-ng-repeat="p in fc.file.participants track by p.participant_id">
              <td>tbd</td>
              <td>tbd</td>
              <td>
                <a data-ui-sref="participant({ participantId : p.participant_id })">
                  {{ ::p.participant_id }}
                </a>
              </td>
              <td>
                <a data-ui-sref="annotations({ 'filters':
                     {{ [{name: 'annotation_id', value: fc.annotationIds }] | makeFilter }} })"
                   data-ng-if="fc.file.annotations">
                  {{ fc.file.annotations.length }}
                </a>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <section class="row" id="files">
    <div class="col-lg-12 col-md-12">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">Related Files</h3>
        </div>

        <div class="panel-body" data-ng-if="!fc.file.related_files.length">
          <h4 class="list-group-item-heading">No related files found.</h4>
        </div>
        <div class="table-responsive" data-ng-if="fc.file.related_files.length">
          <table id="related-files-table" class="table table-striped table-hover table-condensed table-bordered">
            <thead>
            <tr>
              <th scope="col" data-translate>File Name</th>
              <th scope="col" data-translate>File Type</th>
              <th scope="col" data-translate>Checksum</th>
              <th scope="col" data-translate>Action</th>
            </tr>
            </thead>
            <tbody>
            <tr data-ng-repeat="f in fc.file.related_files track by f.file_id">
              <td>{{ ::f.file_name }}</td>
              <td>{{ ::f.type }}</td>
              <td>{{ ::f.md5sum }}</td>
              <td>
                <a data-ng-href="{{ [f.file_id ] | makeDownloadLink }}" data-translate>
                  Download
                </a>
              </td>
            </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <section class="row" id="content" role="application" data-ng-if="fc.file.metadataXML">
    <div class="col-lg-12 col-md-12 pull-right">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title" data-translate="">File Content</h3>
        </div>
        <div class="table-responsive">
          <xml-viewer id="xmlViewer" xml="fc.file.metadataXML"></xml-viewer>
        </div>
      </div>
    </div>
  </section>
</div>
</div>
