<div class="pull-right table-actions">
  <select-columns></select-columns>
  <export-table></export-table>
</div>

<table id="data-table" class="table table-striped table-hover table-condensed table-bordered">
  <caption class="h4" data-translate>Files</caption>
  <thead>
  <tr>
    <th>
      <div class="btn-group pull-right" dropdown>
        <button type="button" class="btn btn-default action-button dropdown-toggle">
          A
        </button>
        <ul class="dropdown-menu" role="menu">
          <li>
            <a data-ng-click="sc.CartService.addFiles(sc.files.hits)">
              <i class="fa fa-download"></i>
              <span data-translate>Select All on This Page</span> ({{sc.files.hits.length}})
            </a>
          </li>
          <li>
            <a data-ng-click="sc.CartService.addAllFiles()">
              <i class="fa fa-download"></i>
              <span data-translate>Select All in Result Set</span> (#)
            </a>
          </li>
        </ul>
      </div>
    </th>
    <th scope="col" class="text-center" data-translate>Access</th>
    <th scope="col" class="text-center" data-translate>File Name</th>
    <th scope="col" class="text-center" data-translate>Participant</th>
    <th scope="col" class="text-center" data-translate>Annotations</th>
    <th scope="col" class="text-center" data-translate>Project</th>
    <th scope="col" class="text-center" data-translate>Data Category</th>
    <th scope="col" class="text-center" data-translate>Status</th>
    <th scope="col" class="text-center" data-translate>File type</th>
    <th scope="col" class="text-center" data-translate>Size</th>
    <th scope="col" class="text-center" data-translate>Revision</th>
    <th scope="col" class="text-center" data-translate>Update date</th>
  </tr>
  </thead>
  <tbody>
  <tr data-ng-repeat="file in sc.files.hits track by file.file_uuid">
    <td>
      <input type="checkbox"
             class="cart-checkbox"
             data-ng-checked="sc.CartService.isInCart(file.file_uuid)"
             data-ng-click="!sc.CartService.isInCart(file.file_uuid) ? sc.CartService.add(file) : sc.CartService.remove([file.file_uuid])">

      <div class="btn-group pull-right" dropdown>
        <button type="button" class="btn btn-default action-button dropdown-toggle">
          A
        </button>
        <ul class="dropdown-menu" role="menu">
          <li role="button"
              aria-label="{{ 'Download File' | translate }}">
            <i class="fa fa-download"></i>
            <span data-translate>Download File</span>
          </li>
          <li role="button"
              aria-label="{{ 'Download Metadata' | translate }}">
            <i class="fa fa-download"></i>
            <span data-translate>Download Metadata</span>
          </li>
          <li class="divider"></li>
          <li role="button"
              aria-label="{{ 'View Files in same Archive' | translate }}">
            <i class="fa fa-file-zip-o"></i>
            <span data-translate>View Files in same Archive</span>
          </li>
          <li role="button"
              aria-label="{{ 'View Metadata Files' | translate }}">
            <i class="fa fa-file-text-o"></i>
            <span data-translate>View Metadata Files</span>
          </li>
        </ul>
      </div>
    </td>
    <td class="text-center">
      <i data-ng-if="!file.data_access" class="fa fa-lock fa-lg"></i>
      <i data-ng-if="file.data_access" class="fa fa-unlock-alt fa-lg"></i>
    </td>
    <td>
      <a data-ui-sref="file({ fileId: file.file_uuid })">
        {{ ::file.file_name }}
      </a>
    </td>
    <td>
      <a data-ui-sref="participant({ participantId: file.participants[0].id })">
        ??? {{ ::file.participants[0].id }}
      </a>
    </td>
    <td>??? {{ ::file.participants.length }}</td>
    <td>
      <a data-ui-sref="project({ projectId: file.project.id })">
        ??? {{ ::file.project.project_name }}
      </a>
    </td>
    <td>{{ ::file.data_type }}</td>
    <td>??? {{ ::file.state }}</td>
    <td>{{ ::file.file_extension }}</td>
    <td>{{ (file.file_size / 1.0e9).toFixed(2) }} GB</td>
    <td>??? {{ ::file.admin.revision }}</td>
    <td>{{ file.modified | date }}</td>
  </tr>
  </tbody>
</table>
<div class="pagination-controls">
  <div class="number-results pull-left">
    <span data-translate>Show</span>

    <div class="btn-group dropup" dropdown is-open="status.isopen">
      <button type="button" class="btn btn-default dropdown-toggle" data-ng-disabled="disabled">
        {{ sc.files.pagination.count }} <span class="caret"></span>
      </button>
      <ul class="dropdown-menu" role="menu">
        <li data-ng-click="sc.searchQuery($event, 10)"
            data-ng-keypress="sc.searchQuery($event, 10)"
            role="button"
            aria-label="Data Sample Size">10</li>
        <li data-ng-click="sc.searchQuery($event, 20)"
            data-ng-keypress="sc.searchQuery($event, 20)"
            role="button"
            aria-label="Data Sample Size">20</li>
        <li data-ng-click="sc.searchQuery($event, 40)"
            data-ng-keypress="sc.searchQuery($event, 40)"
            role="button"
            aria-label="Data Sample Size">40</li>
        <li data-ng-click="sc.searchQuery($event, 60)"
            data-ng-keypress="sc.searchQuery($event, 60)"
            role="button"
            aria-label="Data Sample Size">60</li>
        <li data-ng-click="sc.searchQuery($event, 80)"
            data-ng-keypress="sc.searchQuery($event, 80)"
            role="button"
            aria-label="Data Sample Size">80</li>
        <li data-ng-click="sc.searchQuery($event, 100)"
            data-ng-keypress="sc.searchQuery($event, 100)"
            role="button"
            aria-label="Data Sample Size">100</li>
      </ul>
    </div>
    <span data-translate>entries</span>
  </div>
  <pagination boundary-links="true"
              total-items="sc.files.pagination.total"
              data-ng-model="sc.files.pagination.page"
              items-per-page="sc.files.pagination.count"
              class="pagination-sm pull-right"
              data-ng-change="sc.searchQuery()"
              num-pages="sc.files.pagination.pages"
              max-size="6"
              rotate="false"
              previous-text="&lsaquo;"
              next-text="&rsaquo;"
              first-text="&laquo;"
              last-text="&raquo;"></pagination>
</div>
