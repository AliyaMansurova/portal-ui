// @flow

import React from 'react';
import Relay from 'react-relay';

import type { TBucket } from '@ncigdc/components/Aggregations/types';

export type TProps = {
  aggregations: {
    primary_site: { buckets: [TBucket] },
  },
};

const PrimarySitesCountComponent = (props: TProps) => (
  <span>
    {props.aggregations.primary_site.buckets.length > 0
      ? props.aggregations.primary_site.buckets.length.toLocaleString()
      : <span className="fa fa-spinner fa-spin" />
    }
  </span>
);

export const PrimarySitesQuery = {
  fragments: {
    aggregations: () => Relay.QL`
      fragment on ProjectAggregations {
        primary_site {
          buckets {
            key
          }
        }
      }
    `,
  },
};

const PrimarySitesCountCount = Relay.createContainer(
  PrimarySitesCountComponent,
  PrimarySitesQuery
);

export default PrimarySitesCountCount;
