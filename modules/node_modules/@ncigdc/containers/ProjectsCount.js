// @flow

import React from 'react';
import Relay from 'react-relay';

type TProps = {
  hits: {
    pagination: {
      total: number,
    },
  },
};

const ProjectsCountComponent = (props: TProps) => (
  <span>
    {props.hits.pagination.total > 0
      ? props.hits.pagination.total.toLocaleString()
      : <span className="fa fa-spinner fa-spin" />
    }
  </span>
);

export const ProjectsCountQuery = {
  fragments: {
    hits: () => Relay.QL`
      fragment on ProjectConnection {
        pagination {
          total
        }
      }
    `,
  },
};

const ProjectsCount = Relay.createContainer(
  ProjectsCountComponent,
  ProjectsCountQuery
);

export default ProjectsCount;
