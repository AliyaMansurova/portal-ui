// @flow
import { createStore, combineReducers, applyMiddleware } from 'redux';
import thunk from 'redux-thunk';
import { persistStore } from 'redux-persist';
import reducers from './reducers';

type TSetupStoreArgs = {
  persistConfig: Object,
};
type TSetupStore = (args: TSetupStoreArgs) => Object;
const setupStore: TSetupStore = ({ persistConfig = {} } = {}) => {
  const store = createStore(combineReducers(reducers), applyMiddleware(thunk));

  persistStore(store, {
    whitelist: ['cart', 'tableColumns'],
    ...persistConfig,
  });

  return store;
};

export default setupStore;
